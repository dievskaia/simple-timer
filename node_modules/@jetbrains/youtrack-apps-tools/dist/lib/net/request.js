"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateRequestParams = generateRequestParams;
exports.prepareErrorMessage = prepareErrorMessage;
function generateRequestParams(config, url, options) {
    return new Request(url, {
        method: options?.method ?? 'GET',
        headers: {
            Accept: 'application/json',
            Authorization: `Bearer ${config.token}`,
            'User-Agent': options?.headers?.['User-Agent'] ??
                [`Nodejs/${process.versions.node}`, `YouTrackCLI/${require('../../package.json').version}`].join(' '),
            ...options?.headers,
        },
        body: options?.body,
    });
}
async function prepareErrorMessage(res) {
    const data = (await res.json());
    let errorDescription = res.statusText;
    if ('error_description' in data) {
        errorDescription = data.error_description;
    }
    return `[${res.status}] ${errorDescription}`;
}
