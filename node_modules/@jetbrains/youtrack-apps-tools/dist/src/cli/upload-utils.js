"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveAppName = resolveAppName;
const tslib_1 = require("tslib");
const fs_1 = tslib_1.__importDefault(require("fs"));
const path_1 = tslib_1.__importDefault(require("path"));
const i18n_1 = require("../../lib/i18n/i18n");
const exit_1 = require("../../lib/cli/exit");
function resolveAppName(appDir) {
    if (!appDir) {
        (0, exit_1.exit)(new Error((0, i18n_1.i18n)('App directory should be defined')));
        return;
    }
    const appPath = path_1.default.resolve(appDir);
    if (!fs_1.default.existsSync(appPath)) {
        (0, exit_1.exit)(new Error((0, i18n_1.i18n)("App directory doesn't exist")));
        return;
    }
    let appName = '';
    const pkgPath = path_1.default.join(appPath, 'manifest.json');
    if (fs_1.default.existsSync(pkgPath)) {
        appName = require(pkgPath).name;
    }
    else {
        const obsoletePkgPath = path_1.default.join(appPath, 'package.json');
        if (fs_1.default.existsSync(obsoletePkgPath)) {
            appName = require(obsoletePkgPath).name;
        }
    }
    if (!appName) {
        (0, exit_1.exit)(new Error((0, i18n_1.i18n)("App doesn't contain manifest.json file")));
    }
    return appName;
}
