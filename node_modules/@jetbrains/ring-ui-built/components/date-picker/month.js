import { c } from 'react-compiler-runtime';
import { addDays } from 'date-fns/addDays';
import { endOfMonth } from 'date-fns/endOfMonth';
import { format } from 'date-fns/format';
import { getDay } from 'date-fns/getDay';
import { setDay } from 'date-fns/setDay';
import Day from './day.js';
import { shiftWeekArray, getWeekStartsOn, weekdays, FIFTH_DAY, WEEK } from './consts.js';
import { s as styles } from '../_helpers/date-picker.js';
import { jsx, jsxs } from 'react/jsx-runtime';
import { createElement } from 'react';
import 'classnames';
import 'date-fns/getDate';
import 'date-fns/isAfter';
import 'date-fns/isBefore';
import 'date-fns/isSameDay';
import 'date-fns/isToday';
import 'date-fns/startOfDay';
import 'date-fns/add';

function Month(props) {
  const $ = c(20);
  if ($[0] !== "14b913afec6a0e367382e049e14b38f0432cb1747486488d23fa5601f7987406") {
    for (let $i = 0; $i < 20; $i += 1) {
      $[$i] = Symbol.for("react.memo_cache_sentinel");
    }
    $[0] = "14b913afec6a0e367382e049e14b38f0432cb1747486488d23fa5601f7987406";
  }
  const start = props.month;
  const end = endOfMonth(start);
  const {
    locale
  } = props;
  const weekday = getDay(start);
  let t0;
  if ($[1] !== props.locale) {
    t0 = shiftWeekArray(Object.values(weekdays), getWeekStartsOn(props.locale));
    $[1] = props.locale;
    $[2] = t0;
  } else {
    t0 = $[2];
  }
  const weekDays = t0;
  const fifthDayOfWeek = weekDays[FIFTH_DAY];
  let days;
  if ($[3] !== end || $[4] !== fifthDayOfWeek || $[5] !== start || $[6] !== weekday) {
    let day = setDay(start, weekday >= fifthDayOfWeek ? fifthDayOfWeek : fifthDayOfWeek - WEEK);
    days = [];
    while (day < end) {
      days.push(day);
      day = addDays(day, 1);
    }
    $[3] = end;
    $[4] = fifthDayOfWeek;
    $[5] = start;
    $[6] = weekday;
    $[7] = days;
  } else {
    days = $[7];
  }
  let t1;
  if ($[8] !== locale || $[9] !== props.month) {
    t1 = format(props.month, "LLLL", {
      locale
    });
    $[8] = locale;
    $[9] = props.month;
    $[10] = t1;
  } else {
    t1 = $[10];
  }
  let t2;
  if ($[11] !== t1) {
    t2 = /*#__PURE__*/jsx("span", {
      className: styles.monthTitle,
      children: t1
    });
    $[11] = t1;
    $[12] = t2;
  } else {
    t2 = $[12];
  }
  let t3;
  if ($[13] !== days || $[14] !== props || $[15] !== start) {
    t3 = days.map(date => /*#__PURE__*/createElement(Day, {
      ...props,
      day: date,
      empty: date < start,
      key: +date
    }));
    $[13] = days;
    $[14] = props;
    $[15] = start;
    $[16] = t3;
  } else {
    t3 = $[16];
  }
  let t4;
  if ($[17] !== t2 || $[18] !== t3) {
    t4 = /*#__PURE__*/jsxs("div", {
      className: styles.month,
      children: [t2, t3]
    });
    $[17] = t2;
    $[18] = t3;
    $[19] = t4;
  } else {
    t4 = $[19];
  }
  return t4;
}

export { Month as default };
